<!DOCTYPE html>
<html>

<body>
  <script>
    let memory

    class VecsPanicError extends Error {}

    const imports = {
      env: {
        vecsint_harness_panic: function (ptr, len) {
          const message = new TextDecoder().decode(
            new Uint8Array(memory.buffer, ptr, len)
          );
          throw new VecsPanicError(message);
        },
      }
    };

    WebAssembly.instantiateStreaming(fetch('./demo.wasm'), imports)
      .then(results => {
        memory = results.instance.exports.memory;

        results.instance.exports.start(0);
      });
  </script>
</body>

</html>